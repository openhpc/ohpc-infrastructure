{%- if distro.startswith('openEuler22') -%}
	{%- set interface = 'eth0' -%}
{%- elif distro.startswith('leap15') -%}
	{%- if inventory_hostname_short.startswith('ohpc-huawei-repo') -%}
		{%- set interface = 'enp189s0f0' -%}
	{%- elif inventory_hostname_short.startswith('ohpc-lenovo-repo') -%}
		{%- set interface = 'eth0' -%}
	{%- endif -%}
{%- else -%}
	{%- if inventory_hostname_short.startswith('ohpc-huawei-repo') -%}
		{%- set interface = 'enp189s0f0' -%}
	{%- elif inventory_hostname_short.startswith('ohpc-lenovo-repo') -%}
		{%- set interface = 'ens2f0' -%}
	{%- endif -%}
{%- endif -%}

set default=0
set timeout=1

menuentry 'Install' {
{%- if distro.startswith('leap15') %}
  linux linux ro autoyast=http://{{ repo }}/{{ distro }}-autoyast install=http://{{ repo }}/openSUSE-Leap-{{ distro[4:] }}-DVD-{{ arch }}-Media ifcfg={{ interface }}=dhcp textmode=1 display=1 proxy={{ proxy }} vnc=1 VNCPassword=12345678
  initrd initrd
{% else %}
  linux vmlinuz ro ip={{ interface }}:dhcp inst.ks=http://{{ repo }}/{{ distro }}-kickstart
  initrd initrd.img
{% endif -%}
}
